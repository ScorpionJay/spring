<html>
<meta charset="UTF-8">
<div class="container" style="margin-top: 100px;">

	<div>
		上传测试
		<form action="v1/file/singleSave" method="post"
			enctype="multipart/form-data">
			<input type="file" name="file"> <input type="text"
				name="filename"> <input type="submit" value="submit" />
		</form>

	</div>
	<div id='upload'>use fetch upload</div>

	<div id='fetchTest'></div>

</div>

<script>
console.log(fetch)
// https://github.com/github/fetch
/* fetch('/user/admin')
  .then(function(response) {
    return response.json()
  }).then(function(json) {
    console.log('parsed json', json)
    document.getElementById('fetchTest').innerHTML = JSON.stringify(json)
  }).catch(function(ex) {
    console.log('parsing failed', ex)
  }) */
  

  
document.querySelector('#upload').addEventListener('click',function(){
	console.log(upload)
	var input = document.querySelector('input[type="file"]')

	var data = new FormData()
	data.append('file', input.files[0])
	data.append('user', 'hubot')
	
	fetch('/v1/file/singleSave', {
	  method: 'POST',
	  body: data
	})
	.then(function(response) {
	    return response.json()
	  }).then(function(json) {
	    console.log('parsed json', json)
	    document.getElementById('fetchTest').innerHTML = JSON.stringify(json)
	  }).catch(function(ex) {
	    console.log('parsing failed', ex)
	  })
})  
  

</script>